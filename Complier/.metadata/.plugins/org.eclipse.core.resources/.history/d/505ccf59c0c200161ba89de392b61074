package 词法分析;


import java.io.File;
import java.io.FileReader;

public class Main {
	private static String string;
	private static String str;
	private static char ch;

	
	/*
	 * 读取文件
	 */
	public static void getChar() throws Exception{		  
		File f= new File("E:\\","test.txt");
		if(!f.exists()){
			System.out.println("文件不存在，请输入正确的文件路径");
		}
		FileReader fr = new FileReader(f);
		int rs = 0;
		char []data = new char[256];
		System.out.print("");
		
		while((rs = fr.read(data)) > 0){
			string = new String(data,0,rs).trim();
		}
	}
	
	
	/*
	 *  判断读入的字符是否为字母
	 */
	public static boolean isLetter(char c){
		if((ch >= 'a' && ch <= 'z') || (ch >= 'A' && ch <= 'Z')){
			return true;
		}
		else
			return false;
	}
	
	
	/*
	 * 判断读入的字符是否为数字
	 */
	public static boolean isDigit(char c){
		if(ch >='0' && ch <= '9'){
			return true;
		}
		else
			return false;
	}
	
	
	
	/*
	 * 判断是否为关键字
	 */
	public static boolean isKey(String string) {
		if(string.equals("void") || string.equals("if")|| string .equals("for")|| string.equals("while") 
				|| string.equals("do")|| string.equals("return")|| string.equals("break")
				|| string.equals("main")|| string.equals("#")|| string.equals("include")|| string.equals("iostream")|| string.equals("using")|| string.equals("namespace")|| string.equals("std")||string.equals("int"))
		{
			return true;
		}
		else return false;
	}
	
	
	
	/*
	 * 判断输入的字符并输出单词符号
	 */
	public static void judgement() throws Exception {
		Main.getChar();
		int m = 0;
		char nextc;
		string +=' ';
		 boolean flag=true;
		for(int i = 0;i < string.length();i++){
			switch (m)
			{
			case 0:
				ch = string.charAt(i);
				if(ch == '+' || ch == '-' || ch == '*' || ch == '/' || ch == '='
					|| ch == '>' )
				{
					if((i+1)<string.length()){
					nextc=string.charAt(i+1);
					if(nextc=='=')
					{
						str=ch+"=";
						System.out.println(("( 4 " + "“ " + str + " ” )"));
						str="";
						i+=1;
						m=0;
					}
					}
					else
						m = 4;
				}
				else if(ch == ',' || ch == ';' || ch == '{' || ch == '}' || ch == '(' || ch == ')')
				{
					m = 5;
				} 
				else if ( isDigit((ch =string.charAt(i)) ) )
				{
					
					
					str = "";
					str += ch;
					m = 3;
					
				} 
				else if ( isLetter(ch =string.charAt(i)) )
				{
					str = "";
					str += ch;
					m = 2;
				}
				else if( ch == '<'){
					nextc=string.charAt(i+1);
					if(nextc=='=')
					{
						str=ch+"=";
						System.out.println(("( 4 " + "“ " + str + " ” )"));
						str="";
						i+=1;
						m=0;
					}
				   else if(isLetter(ch=nextc)){
					   
					    int p=string.length()-1;
					  
					  
						if(string.charAt(p-1)=='>')
						{
							System.out.println(("( 5 " + "“ " + "<>" + " ” )"));
							string=string.substring(0,p);
							m=0;
							
						}
						else {
							System.out.println("Error");
							flag=false;

				
						
					   }
					
					}
				   else {
						m=4;
					}
					
				}
				else if(isKey(ch+""))
				{
					System.out.println(("( 1 " + "“ " + ch + " ” )"));
				}
				break;
				
			case 4:
				
				i--;
				System.out.println(("( 4 " + "“ " + ch + " ” )"));
				m = 0;
				break;
				
			case 5:
				i --;
				System.out.println(("( 5 " + "“ " + ch + " ” )"));
				m = 0;
				break;

			case 2:
				if (isLetter(ch = string.charAt(i)))
				{
					str += ch;
					
					
				}
				else if(isDigit(ch))
				{
					str+=ch;
					
				}
				else
				{
					if ( isKey(str) )
					{
						System.out.println("( 1 " + "“ " + str + " ” )");
					}else {
						System.out.println(("( 2 " + "“ " + str + " ” )"));
					}
					i--;
					m = 0;
				}
				
				break;
				
			case 3:
				if (isDigit((ch =string.charAt(i)) ) )
				{
					str += ch;
					
				}
				else if(ch=='.')
				{
					
					str += ch;
					m=1;
				}
				else 
				{
					System.out.println(("( 3 " + "“ " + str + " ” )"));
					i --;
					m = 0;
				}
				break;
			case 1:
				if (isDigit((ch =string.charAt(i)) ) )
				{
					str += ch;
					m=3;
					
				}
				else {
					System.out.println("Error");
					flag=false;
				}
				break;
				
			default :
				{System.out.println("Error");flag=false;}
		
			}
			if(!flag)
				break;
		}
	}
	
	public static void main(String[] args) throws Exception{
		Main.judgement();
//		System.out.print(b)  
		
	}
}

